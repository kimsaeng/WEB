<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX5 - ì˜í™” ì •ë³´ ìƒì„¸</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <script>
        $(function() {
                    // javascript get parameter ==> ê²€ìƒ‰í•˜ì—¬ ë°©ë²•ì°¾ê¸°
                    const queryString = window.location.search;
                    const parameters = new URLSearchParams(queryString);
                    const id = parameters.get('id');

                    // ë°›ì€ requestì— ë”°ë¥¸ ì‘ë‹µ ì°¾ì„ data
                    fetch(`https://api.themoviedb.org/3/movie/upcoming?api_key=a64533e7ece6c72731da47c9c8bc691f&language=ko-KR&page=1`)
                        .then(response => response.json()) 
                        .then(jsonArray => {
                            let results = jsonArray.results; // results data ë°°ì—´ ì „ì²´ ê°€ì ¸ì˜¤ê¸°
                            let imgLoadURL = "https://image.tmdb.org/t/p/w500"; // img íŒŒì¼ ë¡œë“œ ìœ„í•œ ì£¼ì†Œ
                            // results arrayì—ì„œ, request ì‹œ ì „ë‹¬ ë°›ì€ idê°’ê³¼ ì¼ì¹˜í•˜ëŠ” index ì°¾ê¸° 
                            let index = results.findIndex((element) => id == element.id); 
                            // ì°¾ì€ indexë¡œ í•´ë‹¹í•˜ëŠ” ì˜í™”ì˜ ì •ë³´ í™•ì •í•˜ê¸°
                            let data = results[index];
                        

                             // title = ì œëª©, poster_path = í¬ìŠ¤í„° url
                             // release_date = ê°œë´‰ì¼, vote_count = íˆ¬í‘œ ìˆ˜
                             // vote_average = í‰ì , overview = ì¤„ê±°ë¦¬
                             // #movieListì— results ë°ì´í„° ì¤‘ í•„ìš”í•œ ì •ë³´ ì¶”ê°€í•˜ê¸° (table í˜•ì‹)
                             $('#movieDetail').append(` <table id="oneMovie">
                                                            <tr>
                                                                <td id="title" colspan="2">${data.title}</td>
                                                            </tr>
                                                            <tr>
                                                                <td id="poster"> <img id="poster_img" src="${imgLoadURL + data.poster_path}" alt=""> </td>
                                                                <td id="dateAndVote"> 
                                                                    <div id="releasedData">ê°œë´‰ì¼ : ${data.release_date} </div> <br>
                                                                     <div id="voteCount"> ğŸ¯ ${data.vote_count}</div> 
                                                                     <div id="voteAverage"> â™¥ ${data.vote_average} </div>
                                                                </td>
                                                            </tr>
    
                                                            <tr>
                                                                <td id="overview" colspan="2">${data.overview}</td>
                                                            </tr>
                                                        </table>`);

                        });

                })
    </script>
    * Detailed Information *
    <br><br>
    <div id="movieDetail"></div>

    <style>
        #oneMovie {
            width: 60%;
            padding: 2%;
            border: 5px rgb(35, 129, 202) dashed;
            box-shadow: 0 4px 8px 0 rgb(16, 64, 101);
            border-radius: 5%;
            background-color: rgb(201, 247, 247);
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }

        #title {
            padding-bottom: 2%;
            text-align: center;
            font-size: 50px;
            color: rgb(88, 88, 222);
            border-bottom: 2px rgb(35, 129, 202) solid;
        }

        #poster {
            padding: 2%;
            width:60%;
        }

        #poster_img {
            width: 100%;
        }

        #dateAndVote {
            display: inline;
        }

        #releasedData {
            position: relative;
            top: 0;
            font-size: 20pt;
        }
        #voteCount {
            display: inline-block;
            padding: 2%;
            width: 40%;
            position: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5%;
            background-color: rgb(88, 88, 222);
            box-shadow: 0 4px 8px 0 rgb(34, 34, 85);
            text-align: center;
            color: white;
            font-size: 20pt;
        }
        #voteAverage {
            display: inline-block;
            padding: 2%;
            width: 40%;
            position: flex;
            align-items: center;
            justify-content: center;
            border-radius: 5%;
            background-color: rgb(88, 88, 222);
            box-shadow: 0 4px 8px 0 rgb(34, 34, 85);
            text-align: center;
            color: white;
            font-size: 20pt;
        }

        #overview {
            border-top: 2px rgb(35, 129, 202) solid;
            padding-top: 2%;            
            font-size: 15pt;
            font-family:'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
        }

    </style>

</body>
</html>